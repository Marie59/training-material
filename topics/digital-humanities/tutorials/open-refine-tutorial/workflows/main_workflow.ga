{"a_galaxy_workflow": "true", "annotation": "Text mining a museum collection in tabular format to extract from which year most objects derive and what they are.", "comments": [], "creator": [{"class": "Person", "identifier": "0000-0001-9536-5587", "name": "Daniela Schneider"}], "format-version": "0.1", "license": "CC-BY-4.0", "name": "Visualise amount of objects in Museum Collection ", "readme": "# Workflow aims\n\nThe workflow extracts specific data from a museum collection.\nIt is meant as a second step to a previous cleaning done with OpenRefine.\n\n# Input\n\nUse a tsv file with multiple columns as input\n\n# Analysis\n\nWith the workflow, we want to answer two questions\n- From what year does the museum have the most objects?\n- What objects does the museum have from that year?\n\nFor that, we first upload a dataset and extract and visualise the year of creation mentioned in the dataset. Building on that, we extract the objects from that year and visualise it as a word cloud to see, what objects were added in that year.\n\n## From what year does the museum have the most objects?\nTo determine which year most objects derive from, we need to extract only those years with a clear creation date. \n\n### Cutting and Filtering for creation date\nTherefore, we first cut column 6 containing the \"Production Date\" of all objects.\nWe perform our next steps only on this column.\nTo make sure the creation date is accurate, we need to exclude objects, that show a date range. For objects creating a range, we cannot be sure, when they were created.\n\nWe filter by using regular expressions to leave out rows in column 6 that include a dash (-).\nAdditionally, we filter with regular expressions only for those columns that include digits as value. The regular expression for that is \"\\d\". It removes the empty rows without a given creation date.\nAs one object derives from \"BC\" we also exclude that.\n\n### Cleaning the creation date\nSome of the data we get as an output is not in the right format. \nUsing regular expressions adapts that.\nFirst, we use regular expressions to remove \"AD\" from the dates, as it adds no value here and causes problems in later visualisations.\nAdditionally, the format for the creation date is not identical for all rows. Some have only yyyy input, while others have mm/dd/yyyy format.\nRegular expressions help remove mm/dd/ information to only leave the creation year.\nAll of those steps help clean the data, which allows for later visualisation. \nNow, we only have year numbers included in all rows.\nSorting the rows in a descending order shows, that one dataset from 2041 is included, which must be a mistake. We therefore delete said line.\n\n### Summing up objects by creation year\nThis steps sums up how many objects were created in what year by using Datamash.\nThe tool groups and counts objects from the same year. The result is a second column, showing how many objects were created in the year started in the column before.\nSortin this output chronologically is a great starting point for the creation of a bar chart visualising the outcome.\n\n### Bar chart visualising museum object's creation year\nThe bar chart visualizes how many museum objects were created in a defined year. Most objects derive from the late 19th or 20th, century, when the dating of objects was more specific.  \nSorting the file again shows, that most objects with a clear date derive from 1969. But what are they?\n\n## What objects does the museum have from that year?\nFrom the original input document, we now extract only lines with the creation date of 1969 using regular expressions.\nWe see, that the new dataset has 288 lines, just as expected from the amount of objects created created in 1969.\nFrom this dataset, we cut the column specifying the object title to better understand, what objects from 1969 the museum owns.\nFor a better visualisation, we upload a list of stopwords for English.\nThe wordcloud then shows the most frequent words in the object titles, uncovering that the \n\n", "report": {"markdown": "\n# Workflow Execution Report\n\n## Workflow Inputs\n```galaxy\ninvocation_inputs()\n```\n\n## Workflow Outputs\n```galaxy\ninvocation_outputs()\n```\n\n## Workflow\n```galaxy\nworkflow_display()\n```\n"}, "steps": {"0": {"annotation": "", "content_id": null, "errors": null, "id": 0, "input_connections": {}, "inputs": [{"description": "", "name": "openrefine-phm collection tsv.tsv"}], "label": "openrefine-phm collection tsv.tsv", "name": "Input dataset", "outputs": [], "position": {"left": 0, "top": 130}, "tool_id": null, "tool_state": "{\"optional\": false, \"tag\": null}", "tool_version": null, "type": "data_input", "uuid": "6540405e-cf2a-45bc-9c05-0f14a6cd479c", "when": null, "workflow_outputs": []}, "1": {"annotation": "", "content_id": null, "errors": null, "id": 1, "input_connections": {}, "inputs": [{"description": "", "name": "stop_words_english.txt"}], "label": "stop_words_english.txt", "name": "Input dataset", "outputs": [], "position": {"left": 1242.0063636474608, "top": 873.9931030273438}, "tool_id": null, "tool_state": "{\"optional\": false, \"tag\": null}", "tool_version": null, "type": "data_input", "uuid": "f49ed09a-08c0-4c98-b359-208b973bf79f", "when": null, "workflow_outputs": []}, "2": {"annotation": "", "content_id": "Cut1", "errors": null, "id": 2, "input_connections": {"input": {"id": 0, "output_name": "output"}}, "inputs": [], "label": null, "name": "Cut", "outputs": [{"name": "out_file1", "type": "tabular"}], "position": {"left": 337.97291638183583, "top": 0}, "post_job_actions": {}, "tool_id": "Cut1", "tool_state": "{\"__input_ext\": \"tabular\", \"__workflow_invocation_uuid__\": \"60dca66c790311f0bed3b42e99728f38\", \"chromInfo\": \"/opt/galaxy/tool-data/shared/ucsc/chrom/?.len\", \"columnList\": \"c6\", \"delimiter\": \"T\", \"input\": {\"__class__\": \"ConnectedValue\"}, \"__page__\": 0, \"__rerun_remap_job_id__\": null}", "tool_version": "1.0.2", "type": "tool", "uuid": "5ed594f8-8e4a-4961-929c-3e09cf6dd470", "when": null, "workflow_outputs": []}, "3": {"annotation": "", "content_id": "Grep1", "errors": null, "id": 3, "input_connections": {"input": {"id": 0, "output_name": "output"}}, "inputs": [], "label": null, "name": "Select", "outputs": [{"name": "out_file1", "type": "input"}], "position": {"left": 1016.300048828125, "top": 729.3333740234375}, "post_job_actions": {}, "tool_id": "Grep1", "tool_state": "{\"__input_ext\": \"input\", \"chromInfo\": \"/opt/galaxy/tool-data/shared/ucsc/chrom/?.len\", \"input\": {\"__class__\": \"ConnectedValue\"}, \"invert\": \"\", \"keep_header\": false, \"pattern\": \"[\\\\t]1969[\\\\t]\", \"__page__\": 0, \"__rerun_remap_job_id__\": null}", "tool_version": "1.0.4", "type": "tool", "uuid": "fa5392b3-324c-4a72-bc74-79f0b4dffb18", "when": null, "workflow_outputs": []}, "4": {"annotation": "", "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/filter_tabular/filter_tabular/3.3.1", "errors": null, "id": 4, "input_connections": {"input": {"id": 2, "output_name": "out_file1"}}, "inputs": [], "label": null, "name": "Filter Tabular", "outputs": [{"name": "output", "type": "tabular"}], "position": {"left": 338.9666748046875, "top": 125}, "post_job_actions": {}, "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/filter_tabular/filter_tabular/3.3.1", "tool_shed_repository": {"changeset_revision": "90f657745fea", "name": "filter_tabular", "owner": "iuc", "tool_shed": "toolshed.g2.bx.psu.edu"}, "tool_state": "{\"__input_ext\": \"tabular\", \"__workflow_invocation_uuid__\": \"60dca66c790311f0bed3b42e99728f38\", \"chromInfo\": \"/opt/galaxy/tool-data/shared/ucsc/chrom/?.len\", \"comment_char\": false, \"input\": {\"__class__\": \"ConnectedValue\"}, \"linefilters\": [{\"__index__\": 0, \"filter\": {\"filter_type\": \"regex\", \"__current_case__\": 8, \"regex_pattern\": \"-\", \"regex_action\": \"exclude_find\"}}, {\"__index__\": 1, \"filter\": {\"filter_type\": \"regex\", \"__current_case__\": 8, \"regex_pattern\": \"\\\\d\", \"regex_action\": \"include_find\"}}, {\"__index__\": 2, \"filter\": {\"filter_type\": \"regex\", \"__current_case__\": 8, \"regex_pattern\": \"BC\", \"regex_action\": \"exclude_find\"}}], \"__page__\": 0, \"__rerun_remap_job_id__\": null}", "tool_version": "3.3.1", "type": "tool", "uuid": "a1af8d32-9f85-4c02-b89a-11b28ba529d9", "when": null, "workflow_outputs": []}, "5": {"annotation": "", "content_id": "Cut1", "errors": null, "id": 5, "input_connections": {"input": {"id": 3, "output_name": "out_file1"}}, "inputs": [], "label": null, "name": "Cut", "outputs": [{"name": "out_file1", "type": "tabular"}], "position": {"left": 1242.0063636474608, "top": 723.9931030273438}, "post_job_actions": {}, "tool_id": "Cut1", "tool_state": "{\"__input_ext\": \"tabular\", \"chromInfo\": \"/opt/galaxy/tool-data/shared/ucsc/chrom/?.len\", \"columnList\": \"c2\", \"delimiter\": \"T\", \"input\": {\"__class__\": \"ConnectedValue\"}, \"__page__\": 0, \"__rerun_remap_job_id__\": null}", "tool_version": "1.0.2", "type": "tool", "uuid": "5fa0084e-46e7-452c-a4d2-4768f5db07a9", "when": null, "workflow_outputs": []}, "6": {"annotation": "", "content_id": "toolshed.g2.bx.psu.edu/repos/galaxyp/regex_find_replace/regexColumn1/1.0.3", "errors": null, "id": 6, "input_connections": {"input": {"id": 4, "output_name": "output"}}, "inputs": [], "label": null, "name": "Column Regex Find And Replace", "outputs": [{"name": "out_file1", "type": "input"}], "position": {"left": 339.9666748046875, "top": 257}, "post_job_actions": {}, "tool_id": "toolshed.g2.bx.psu.edu/repos/galaxyp/regex_find_replace/regexColumn1/1.0.3", "tool_shed_repository": {"changeset_revision": "503bcd6ebe4b", "name": "regex_find_replace", "owner": "galaxyp", "tool_shed": "toolshed.g2.bx.psu.edu"}, "tool_state": "{\"__input_ext\": \"input\", \"__workflow_invocation_uuid__\": \"60dca66c790311f0bed3b42e99728f38\", \"checks\": [{\"__index__\": 0, \"pattern\": \"AD\", \"replacement\": \"\"}, {\"__index__\": 1, \"pattern\": \"\\\\d\\\\d/\\\\d\\\\d/\", \"replacement\": \"\"}], \"chromInfo\": \"/opt/galaxy/tool-data/shared/ucsc/chrom/?.len\", \"field\": \"1\", \"input\": {\"__class__\": \"ConnectedValue\"}, \"__page__\": 0, \"__rerun_remap_job_id__\": null}", "tool_version": "1.0.3", "type": "tool", "uuid": "621ad9ed-7557-4a89-bf57-a3169f3af28b", "when": null, "workflow_outputs": []}, "7": {"annotation": "", "content_id": "toolshed.g2.bx.psu.edu/repos/bgruening/wordcloud/wordcloud/1.9.4+galaxy2", "errors": null, "id": 7, "input_connections": {"stopwords": {"id": 1, "output_name": "output"}, "text": {"id": 5, "output_name": "out_file1"}}, "inputs": [], "label": null, "name": "Generate a word cloud", "outputs": [{"name": "output", "type": "png"}], "position": {"left": 1542.0063636474608, "top": 763.9931030273438}, "post_job_actions": {}, "tool_id": "toolshed.g2.bx.psu.edu/repos/bgruening/wordcloud/wordcloud/1.9.4+galaxy2", "tool_shed_repository": {"changeset_revision": "57e3de4b3b0d", "name": "wordcloud", "owner": "bgruening", "tool_shed": "toolshed.g2.bx.psu.edu"}, "tool_state": "{\"__input_ext\": \"input\", \"background\": \"#000000\", \"chromInfo\": \"/opt/galaxy/tool-data/shared/ucsc/chrom/?.len\", \"color_choice\": {\"color_option\": \"color\", \"__current_case__\": 0, \"color\": \"#00ff00\"}, \"colormap\": null, \"contour_color\": \"#000000\", \"contour_width\": \"0.0\", \"font_step\": \"1\", \"fonts\": {\"fonts_selector\": \"none\", \"__current_case__\": 0}, \"height\": \"200\", \"include_numbers\": false, \"margin\": \"2\", \"mask\": null, \"max_font_size\": null, \"max_words\": \"200\", \"min_font_size\": \"4\", \"min_word_length\": \"0\", \"mode\": null, \"no_collocations\": true, \"no_normalize_plurals\": true, \"prefer_horizontal\": \"0.3\", \"random_state\": \"10\", \"relative_scaling\": \"0.8\", \"repeat\": false, \"scale\": \"1.0\", \"stopwords\": {\"__class__\": \"ConnectedValue\"}, \"text\": {\"__class__\": \"ConnectedValue\"}, \"width\": \"400\", \"__page__\": 0, \"__rerun_remap_job_id__\": null}", "tool_version": "1.9.4+galaxy2", "type": "tool", "uuid": "50306584-8416-48eb-b649-4848883cd25c", "when": null, "workflow_outputs": []}, "8": {"annotation": "", "content_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_sort_header_tool/9.5+galaxy2", "errors": null, "id": 8, "input_connections": {"infile": {"id": 6, "output_name": "out_file1"}}, "inputs": [], "label": null, "name": "Sort", "outputs": [{"name": "outfile", "type": "input"}], "position": {"left": 335.966796875, "top": 384}, "post_job_actions": {}, "tool_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_sort_header_tool/9.5+galaxy2", "tool_shed_repository": {"changeset_revision": "c41d78ae5fee", "name": "text_processing", "owner": "bgruening", "tool_shed": "toolshed.g2.bx.psu.edu"}, "tool_state": "{\"__input_ext\": \"input\", \"__workflow_invocation_uuid__\": \"60dca66c790311f0bed3b42e99728f38\", \"chromInfo\": \"/opt/galaxy/tool-data/shared/ucsc/chrom/?.len\", \"header\": \"0\", \"ignore_case\": false, \"infile\": {\"__class__\": \"ConnectedValue\"}, \"sortkeys\": [{\"__index__\": 0, \"column\": \"1\", \"order\": \"r\", \"style\": \"n\"}], \"unique\": false, \"__page__\": 0, \"__rerun_remap_job_id__\": null}", "tool_version": "9.5+galaxy2", "type": "tool", "uuid": "dc5f17af-e0f3-4d96-8c64-d2254c60419a", "when": null, "workflow_outputs": []}, "9": {"annotation": "", "content_id": "Remove beginning1", "errors": null, "id": 9, "input_connections": {"input": {"id": 8, "output_name": "outfile"}}, "inputs": [], "label": null, "name": "Remove beginning", "outputs": [{"name": "out_file1", "type": "input"}], "position": {"left": 338.966796875, "top": 500}, "post_job_actions": {}, "tool_id": "Remove beginning1", "tool_state": "{\"__input_ext\": \"tabular\", \"__workflow_invocation_uuid__\": \"60dca66c790311f0bed3b42e99728f38\", \"chromInfo\": \"/opt/galaxy/tool-data/shared/ucsc/chrom/?.len\", \"input\": {\"__class__\": \"ConnectedValue\"}, \"num_lines\": \"1\", \"__page__\": 0, \"__rerun_remap_job_id__\": null}", "tool_version": "1.0.0", "type": "tool", "uuid": "99de89bc-5781-4304-bd99-a8205dfb6737", "when": null, "workflow_outputs": []}, "10": {"annotation": "", "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/datamash_ops/datamash_ops/1.9+galaxy0", "errors": null, "id": 10, "input_connections": {"in_file": {"id": 9, "output_name": "out_file1"}}, "inputs": [], "label": null, "name": "Datamash", "outputs": [{"name": "out_file", "type": "input"}], "position": {"left": 339.9666748046875, "top": 634}, "post_job_actions": {}, "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/datamash_ops/datamash_ops/1.9+galaxy0", "tool_shed_repository": {"changeset_revision": "61e2aa6bb55d", "name": "datamash_ops", "owner": "iuc", "tool_shed": "toolshed.g2.bx.psu.edu"}, "tool_state": "{\"__input_ext\": \"input\", \"__workflow_invocation_uuid__\": \"60dca66c790311f0bed3b42e99728f38\", \"chromInfo\": \"/opt/galaxy/tool-data/shared/ucsc/chrom/?.len\", \"grouping\": \"1\", \"header_in\": false, \"header_out\": false, \"ignore_case\": false, \"in_file\": {\"__class__\": \"ConnectedValue\"}, \"narm\": false, \"need_sort\": true, \"operations\": [{\"__index__\": 0, \"op_name\": \"count\", \"op_column\": \"1\"}], \"print_full_line\": false, \"__page__\": 0, \"__rerun_remap_job_id__\": null}", "tool_version": "1.9+galaxy0", "type": "tool", "uuid": "2fcb8666-b4a9-4bf9-ad33-e88bbaec9e48", "when": null, "workflow_outputs": []}, "11": {"annotation": "", "content_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_sort_header_tool/9.5+galaxy2", "errors": null, "id": 11, "input_connections": {"infile": {"id": 10, "output_name": "out_file"}}, "inputs": [], "label": null, "name": "Sort", "outputs": [{"name": "outfile", "type": "input"}], "position": {"left": 343.9666748046875, "top": 753}, "post_job_actions": {}, "tool_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_sort_header_tool/9.5+galaxy2", "tool_shed_repository": {"changeset_revision": "c41d78ae5fee", "name": "text_processing", "owner": "bgruening", "tool_shed": "toolshed.g2.bx.psu.edu"}, "tool_state": "{\"__input_ext\": \"input\", \"__workflow_invocation_uuid__\": \"60dca66c790311f0bed3b42e99728f38\", \"chromInfo\": \"/opt/galaxy/tool-data/shared/ucsc/chrom/?.len\", \"header\": \"0\", \"ignore_case\": false, \"infile\": {\"__class__\": \"ConnectedValue\"}, \"sortkeys\": [{\"__index__\": 0, \"column\": \"1\", \"order\": \"\", \"style\": \"n\"}], \"unique\": false, \"__page__\": 0, \"__rerun_remap_job_id__\": null}", "tool_version": "9.5+galaxy2", "type": "tool", "uuid": "310a419a-4066-43a9-bdc2-2af2b07c82a8", "when": null, "workflow_outputs": []}, "12": {"annotation": "", "content_id": "barchart_gnuplot", "errors": null, "id": 12, "input_connections": {"input": {"id": 11, "output_name": "outfile"}}, "inputs": [], "label": null, "name": "Bar chart", "outputs": [{"name": "out_file1", "type": "png"}], "position": {"left": 636.9666748046875, "top": 671}, "post_job_actions": {}, "tool_id": "barchart_gnuplot", "tool_state": "{\"__input_ext\": \"tabular\", \"__workflow_invocation_uuid__\": \"60dca66c790311f0bed3b42e99728f38\", \"chromInfo\": \"/opt/galaxy/tool-data/shared/ucsc/chrom/?.len\", \"colList\": [\"2\"], \"input\": {\"__class__\": \"ConnectedValue\"}, \"pdf_size\": \"800,600\", \"title\": \"Amount of objects \", \"xtic\": {\"userSpecified\": \"Yes\", \"__current_case__\": 0, \"xticColumn\": \"1\"}, \"ylabel\": \"V1\", \"ymax\": \"0\", \"ymin\": \"0\", \"__page__\": 0, \"__rerun_remap_job_id__\": null}", "tool_version": "1.0.0", "type": "tool", "uuid": "509f486f-cb1e-4446-ae17-91624aa30762", "when": null, "workflow_outputs": []}, "13": {"annotation": "", "content_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_sort_header_tool/9.5+galaxy2", "errors": null, "id": 13, "input_connections": {"infile": {"id": 11, "output_name": "outfile"}}, "inputs": [], "label": null, "name": "Sort", "outputs": [{"name": "outfile", "type": "input"}], "position": {"left": 639.9666748046875, "top": 781}, "post_job_actions": {}, "tool_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_sort_header_tool/9.5+galaxy2", "tool_shed_repository": {"changeset_revision": "c41d78ae5fee", "name": "text_processing", "owner": "bgruening", "tool_shed": "toolshed.g2.bx.psu.edu"}, "tool_state": "{\"__input_ext\": \"input\", \"chromInfo\": \"/opt/galaxy/tool-data/shared/ucsc/chrom/?.len\", \"header\": \"0\", \"ignore_case\": false, \"infile\": {\"__class__\": \"ConnectedValue\"}, \"sortkeys\": [{\"__index__\": 0, \"column\": \"2\", \"order\": \"r\", \"style\": \"n\"}], \"unique\": false, \"__page__\": 0, \"__rerun_remap_job_id__\": null}", "tool_version": "9.5+galaxy2", "type": "tool", "uuid": "3225e90f-a4c6-494f-b1b0-109ecbdfbd2e", "when": null, "workflow_outputs": []}}, "tags": ["openrefine", "culturedata", "4culture", "visualisation", "tabulardata", "textcleaning"], "uuid": "c2cb0da3-e1fa-47de-b9c3-97eacf558e97", "version": 22}